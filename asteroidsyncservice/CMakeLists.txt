cmake_minimum_required(VERSION 3.15)
find_package(Qt5 COMPONENTS Core Bluetooth DBus Qml Quick REQUIRED)
if (SAILFISHOS_PLATFORM)
    set(PLATFORM_SOURCE_DIR "platforms/sailfishos")
endif()
if (UBUNTU_TOUCH_PLATFORM)
    set(PLATFORM_SOURCE_DIR "platforms/ubuntutouch")
endif()
add_library(asteroidsyncserviceplugin SHARED syncservice_plugin.cpp watch.cpp watches.cpp ${PLATFORM_SOURCE_DIR}/servicecontrol.cpp)
target_include_directories(asteroidsyncserviceplugin PRIVATE ${PLATFORM_SOURCE_DIR})
target_compile_features(asteroidsyncserviceplugin PUBLIC cxx_std_17)
target_link_libraries(asteroidsyncserviceplugin PRIVATE Qt5::Core Qt5::Bluetooth Qt5::DBus Qt5::Qml Qt5::Quick asteroid)
message("VERSION ${QT5Qml_VERSION}")
message("LIBRARIES ${QT5Qml_LIBRARIES}")
message("INCLUDE_DIRS ${QT5Qml_INCLUDE_DIRS}")
message("DEFINITIONS ${QT5Qml_DEFINITIONS}")
message("COMPILE_DEFINITIONS ${QT5Qml_COMPILE_DEFINITIONS}")
message("FOUND ${QT5Qml_FOUND}")
message("EXECUTABLE_COMPILE_FLAGS ${QT5Qml_EXECUTABLE_COMPILE_FLAGS}")
get_target_property(QT5Qml_location Qt5::Qml LOCATION)
message("location ${QT5Qml_location}")
message(STATUS "Your qml dir file is ${QML_DIR_FILE}")
message("QT_INSTALL_QML ${QT_INSTALL_QML}")
install(TARGETS asteroidsyncserviceplugin)
# other file qmldir
